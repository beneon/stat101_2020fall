library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 50
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
df = data.frame(
trial_num,sums
)
df %>% ggplot(aes(x=sums))+geom_histogram()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
df = data.frame(
trial_num,sums
)
df %>% ggplot(aes(x=sums))+geom_histogram()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
df = data.frame(
trial_num,sums
)
df %>% ggplot(aes(x=sums))+geom_histogram()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 1000000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
df = data.frame(
trial_num,sums
)
df %>% ggplot(aes(x=sums))+geom_histogram()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
df = data.frame(
trial_num,sums
)
df %>% ggplot(aes(x=sums))+geom_histogram()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample/sample_size)
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
box_of_ball = c(-3,-2,-1,0,1,2,3)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 30
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()
mean(c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15))
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
reference_mean = mean(c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15))
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
reference_mean = mean(c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15))
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
reference_mean = mean(c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15))
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)+geom_vline(xintercept = mean(x),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
reference_mean = mean(c(rep(1,5),rep(2,7),rep(3,8),rep(4,5),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15))
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)+geom_vline(xintercept = mean(means),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 10
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)+geom_vline(xintercept = mean(means),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)+geom_vline(xintercept = mean(means),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean)+geom_vline(xintercept = mean(means),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean,color='green',size=1.5)+geom_vline(xintercept = mean(means),color='red')
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean,color='green',size=1)+geom_vline(xintercept = mean(means),color='red',size=1)
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean,color='green',size=1)+geom_vline(xintercept = mean(means),type='dot',color='red',size=1)
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 5
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean,color='green',size=1)+geom_vline(xintercept = mean(means),linetype='dashed',color='red',size=1)
# sum of sample variables follow normal dist.
library(purrr)
library(ggplot2)
library(dplyr)
balls = c(rep(1,5),rep(2,11),rep(3,18),rep(4,10),rep(5,4),rep(6,3),rep(7,3),rep(8,3),rep(9,3),rep(10,2),rep(11,2),rep(12,2),13,14,15)
hist(balls)
ball_sample = function(n){
# n: size of sample
#box_of_ball = c(-3,-2,-1,0,1,2,3)
box_of_ball = balls
sample_rst = sample(box_of_ball,n,replace = TRUE)
return(sum(sample_rst))
}
trials = 100000
sample_size = 50
reference_mean = mean(balls)
trial_num = 1:trials
sample_sizes = rep(sample_size,trials)
sums = map_dbl(sample_sizes,ball_sample)
means = map_dbl(sample_sizes,ball_sample)/sample_size
df = data.frame(
trial_num,sums,means
)
df %>% ggplot(aes(x=sums))+geom_density()
df %>% ggplot(aes(x=means))+geom_density()+geom_vline(xintercept = reference_mean,color='green',size=1)+geom_vline(xintercept = mean(means),linetype='dashed',color='red',size=1)
library(ggplot2)
library(ggplot2)
library(dplyr)
source('./c02/gen_freq_table.R')
#parameter zone
mean = 4.5
sd = 0.5
n = 140
#construct df and plot
df = data.frame(id=seq(1,n),rbc=round(rnorm(n,mean,sd),2))
df_freq_table <- gen_freqency_table(df$rbc,breaks = 10,title4group = 'rbc count,x10^12/L')
View(df_freq_table)
df %>% ggplot(aes(x=rbc))+geom_histogram(bins=14)
# Title     : TODO
# Objective : TODO
# Created by: Administrator
# Created on: 2020/10/10
library(dplyr)
pt = c(rep(1,5),rep(2,5))
bp = c(162,145,178,142,186,164,160,163,159,166)
df = data.frame(pt = pt, bp=bp)
# 极差(range)的计算演示
df_range = df %>% group_by(pt) %>% summarise(max=max(bp),min=min(bp),range=max-min)
# IQR的计算演示
df_iqr = df %>% group_by(pt) %>% summarise(q1=quantile(bp,0.25),q3=quantile(bp,0.75),iqr=q3-q1)
# 方差(variance)的计算演示
df_var = df %>% group_by(pt) %>% mutate(
xbar=mean(bp),
`x-xbar` =bp-xbar,
`(x-xbar)^2` = `x-xbar`^2, `sum((x-xbar)^2)` = cumsum(`(x-xbar)^2`),
`expectation((x-xbar)^2)` = cummean(`(x-xbar)^2`)
)
v1 = c(1/2,1/2,1/4,1/4,rep(1/8,4),1/32,1/32)
mean(1)
mean(v1)
log_v1 = log(v1,base=10)
log_v1
mean(log_v1)
10^mean(log_v1)
1/10^mean(log_v1)
hist(v1)
